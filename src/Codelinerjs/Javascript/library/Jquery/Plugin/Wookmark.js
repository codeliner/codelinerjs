/*!
jQuery wookmark plugin
@name jquery.wookmark.js
@author Christoph Ono (chri@sto.ph or @gbks)
@author Sebastian Helzle (sebastian@helzle.net or @sebobo)
@version 1.0.4
@date 03/12/2013
@category jQuery plugin
@copyright (c) 2009-2013 Christoph Ono (www.wookmark.com)
@license Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
*/
(function(o){var t={align:"center",container:o("body"),offset:2,autoResize:!1,itemWidth:0,resizeDelay:50};o.fn.wookmark=function(i){function s(o){return void 0===o?e.outerWidth():o}null==i&&(i={});var e=o(this[0]);return this.wookmarkOptions=o.extend({},t,i),this.wookmarkColumns||(this.wookmarkColumns=null,this.wookmarkContainerWidth=null),this.wookmarkLayout=function(){if(this.wookmarkOptions.container.is(":visible")){var o,t=s(this.wookmarkOptions.itemWidth)+this.wookmarkOptions.offset,i=this.wookmarkOptions.container.width(),e=Math.floor((i+this.wookmarkOptions.offset)/t);switch(this.wookmarkOptions.align){case"left":case"right":o=Math.floor((e/t+this.wookmarkOptions.offset)/2);break;case"center":default:o=Math.round((i-(e*t-this.wookmarkOptions.offset))/2)}var r=0;r=null!=this.wookmarkColumns&&this.wookmarkColumns.length==e?this.wookmarkLayoutColumns(t,o):this.wookmarkLayoutFull(t,e,o),this.wookmarkOptions.container.css("height",r+"px")}},this.wookmarkLayoutFull=function(t,i,s){for(var e=[];i>e.length;)e.push(0);for(this.wookmarkColumns=[];i>this.wookmarkColumns.length;)this.wookmarkColumns.push([]);for(var r,k=0,a=0,h=this.length,n=null,m=null,l=0;h>k;k++){for(r=o(this[k]),n=null,m=0,a=0;i>a;a++)(null==n||n>e[a])&&(n=e[a],m=a);r.css({position:"absolute",top:n+"px"});var w=m*t+s+"px";"right"==this.wookmarkOptions.align?r.css("right",w):r.css("left",w),e[m]=n+r.outerHeight()+this.wookmarkOptions.offset,l=Math.max(l,e[m]),this.wookmarkColumns[m].push(r)}return l},this.wookmarkLayoutColumns=function(o,t){for(var i=[];i.length<this.wookmarkColumns.length;)i.push(0);for(var s,e,r,k=0,a=this.wookmarkColumns.length,h=0,n=0;a>k;k++)for(s=this.wookmarkColumns[k],e=s.length,h=0;e>h;h++){r=s[h],r.css({top:i[k]+"px"});var m=k*o+t+"px";"right"==this.wookmarkOptions.align?r.css("right",m):r.css("left",m),i[k]+=r.outerHeight()+this.wookmarkOptions.offset,n=Math.max(n,i[k])}return n},this.wookmarkResizeTimer=null,this.wookmarkResizeMethod||(this.wookmarkResizeMethod=null),this.wookmarkOptions.autoResize&&(this.wookmarkOnResize=function(){this.wookmarkResizeTimer&&clearTimeout(this.wookmarkResizeTimer),this.wookmarkResizeTimer=setTimeout(o.proxy(this.wookmarkLayout,this),this.wookmarkOptions.resizeDelay)},this.wookmarkResizeMethod||(this.wookmarkResizeMethod=o.proxy(this.wookmarkOnResize,this)),o(window).resize(this.wookmarkResizeMethod),this.wookmarkOptions.container.bind("refreshWookmark",this.wookmarkResizeMethod)),this.wookmarkClear=function(){this.wookmarkResizeTimer&&(clearTimeout(this.wookmarkResizeTimer),this.wookmarkResizeTimer=null),this.wookmarkResizeMethod&&(o(window).unbind("resize",this.wookmarkResizeMethod),this.wookmarkOptions.container.unbind("refreshWookmark",this.wookmarkResizeMethod))},this.wookmarkLayout(),this.show(),this}})(jQuery);